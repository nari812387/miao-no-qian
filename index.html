<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8">
  <title>å–µã®ç±¤ï½œæ¯æ—¥é‹å‹¢å¡</title>
  <style>
    body {
      background-color: #fff8f0;
      font-family: "Helvetica", "Noto Sans TC", sans-serif;
      text-align: center;
      padding: 2rem;
    }
    h1 {
      font-size: 2.2rem;
      color: #ff6699;
    }
    button {
      padding: 10px 20px;
      font-size: 1.1rem;
      background-color: #ffccdd;
      border: none;
      border-radius: 12px;
      cursor: pointer;
      margin: 1rem;
    }
    img {
      margin-top: 1rem;
      max-width: 300px;
      border-radius: 16px;
      box-shadow: 0 0 10px rgba(0,0,0,0.15);
    }
    .title {
      font-size: 1.3rem;
      margin-top: 1rem;
      font-weight: bold;
    }
    .desc {
      font-size: 1rem;
      color: #666;
      margin: 0.5rem 0 2rem;
    }
  </style>
</head>
<body>

  <h1>ğŸ¾ å–µã®ç±¤</h1>
  <p>æ¯å¤©å¯ä»¥æŠ½å…©æ¬¡è²“è²“é‹å‹¢å¡</p>

  <button onclick="drawCard()">æŠ½å¡ï¼</button>
  <button onclick="resetDraws()">é‡ç½®ä»Šå¤©æŠ½å¡æ¬¡æ•¸</button>

  <div id="card-container" style="display: none;">
    <img id="card-img" src="">
    <div class="title" id="card-title"></div>
    <div class="desc" id="card-desc"></div>
  </div>

  <!-- èƒŒæ™¯éŸ³æ¨‚ -->
  <audio id="bgm" src="bgm.mp3" autoplay loop></audio>

  <script>
    // èƒŒæ™¯éŸ³æ¨‚æ’­æ”¾ï¼ˆé¿å…ç€è¦½å™¨é˜»æ“‹ï¼‰
    document.addEventListener('click', function () {
      const audio = document.getElementById("bgm");
      if (audio.paused) {
        audio.play().catch(() => {}); // å¿½ç•¥éŒ¯èª¤
      }
    }, { once: true });

    const cards = [
      { id: 1, title: "ã ã‚‹å–µ", desc: "ä»Šå¤©æ²’å¹¹å‹ä¹Ÿæ²’é—œä¿‚ï½æ…¢æ…¢ä¾†å§", img: "1.jpg" },
      { id: 2, title: "å…ƒæ°£å–µ", desc: "æ´»åŠ›æ»¿æ»¿çš„ä¸€å¤©ï¼Œè¦å¥½å¥½æŠŠæ¡å–”ï¼", img: "2.jpg" },
      { id: 3, title: "ç¥ç§˜å–µ", desc: "ä»Šå¤©å¯èƒ½æœƒé‡åˆ°ç‰¹åˆ¥çš„äºº...", img: "3.jpg" },
      { id: 4, title: "å¹¸é‹å–µ", desc: "å°ç¢ºå¹¸åœ¨ç­‰ä½ ç™¼ç¾ï½", img: "4.jpg" },
      { id: 5, title: "æ‡¶æ‡¶å–µ", desc: "å¶çˆ¾è€å»¢ä¸€ä¸‹ä¹Ÿæ²’é—œä¿‚ã€‚", img: "5.jpg" },
      { id: 6, title: "ç™¼è²¡å–µ", desc: "è²¡é‹æ—ºæ—ºï¼Œè¨˜å¾—å¤šç¬‘ä¸€é»ï¼", img: "6.jpg" },
      { id: 7, title: "æ€è€ƒå–µ", desc: "ä»Šå¤©é©åˆå¥½å¥½è¦åŠƒä¸‹ä¸€æ­¥", img: "7.jpg" }
    ];

    function getTodayKey() {
      const today = new Date().toISOString().split("T")[0];
      return `draws_${today}`;
    }

    function drawCard() {
      const key = getTodayKey();
      let draws = JSON.parse(localStorage.getItem(key)) || [];

      if (draws.length >= 2) {
        alert("ä»Šå¤©å·²ç¶“æŠ½éå…©æ¬¡å›‰ï¼");
        return;
      }

      let card;
      do {
        card = cards[Math.floor(Math.random() * cards.length)];
      } while (draws.includes(card.id) && draws.length < cards.length);

      draws.push(card.id);
      localStorage.setItem(key, JSON.stringify(draws));

      document.getElementById("card-img").src = card.img;
      document.getElementById("card-title").textContent = card.title;
      document.getElementById("card-desc").textContent = card.desc;
      document.getElementById("card-container").style.display = "block";
    }

    function resetDraws() {
      const key = getTodayKey();
      localStorage.removeItem(key);
      alert("å·²é‡ç½®ä»Šå¤©çš„æŠ½å¡ç´€éŒ„ï¼Œä½ å¯ä»¥é‡æ–°æŠ½å…©æ¬¡å›‰ï¼");
      document.getElementById("card-container").style.display = "none";
    }
  </script>

</body>
</html>
