<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>å–µã®ç±¤</title>
  <style>
    body {
      font-family: "Arial", sans-serif;
      text-align: center;
      background-color: #fffaf0;
      padding: 1em;
    }

    h1 {
      color: #e87c7c;
      font-size: 2em;
    }

    img {
      max-width: 100%;
      height: auto;
      margin-top: 1em;
      border-radius: 12px;
      box-shadow: 0 4px 8px rgba(0,0,0,0.1);
    }

    button {
      margin: 1em 0.5em;
      padding: 0.6em 1.2em;
      font-size: 1em;
      border: none;
      border-radius: 8px;
      background-color: #f8bcbc;
      color: white;
      cursor: pointer;
    }

    button:hover {
      background-color: #f28a8a;
    }

    p {
      font-size: 1.1em;
      color: #555;
    }

    #saying {
      margin-top: 1em;
      font-size: 1.2em;
      color: #d37676;
      font-weight: bold;
    }
  </style>
</head>
<body>
  <h1>ğŸ¾ å–µã®ç±¤ ğŸ¾</h1>
  <button onclick="drawCard()">æŠ½ä¸€å¼µå–µå–µå¡</button>
  <button onclick="resetCount()">é‡ç½®ä»Šæ—¥æ¬¡æ•¸</button>
  <br />
  <img id="cardImage" src="" alt="ä»Šæ—¥è²“ç±¤" style="display: none;" />
  <p id="saying"></p>
  <p id="countText"></p>
  <audio id="bgm" src="bgm.mp3" loop></audio>

  <script>
    const images = ["1.jpg", "2.jpg", "3.jpg", "4.jpg", "5.jpg", "6.jpg", "7.jpg"];
    const sayings = [
      "ä»Šå¤©ä¹Ÿè¦åƒè²“ä¸€æ¨£æ…µæ‡¶å¿«æ¨‚ï½",
      "å–µï½åˆ¥å¿˜äº†åƒå¥½åƒçš„æ±è¥¿å–”ï¼",
      "æ“æŠ±é™½å…‰ï¼Œå¥½é‹å°±ä¾†ï½â˜€ï¸",
      "ä»Šå¤©æ˜¯å€‹æ’’å¬Œçš„å¥½æ—¥å­å–µï¼",
      "çµ¦è‡ªå·±ä¸€é»æ”¾ç©ºçš„æ™‚é–“å–µï½",
      "ä¸é–‹å¿ƒçš„äº‹å°±äº¤çµ¦æ˜¨å¤©å§ï½",
      "ç›¸ä¿¡è‡ªå·±ï¼Œä½ æœ€æ£’äº†å–µï¼"
    ];

    const cardImage = document.getElementById("cardImage");
    const countText = document.getElementById("countText");
    const sayingText = document.getElementById("saying");
    const bgm = document.getElementById("bgm");

    const today = new Date().toISOString().slice(0, 10);
    let lastDrawDate = localStorage.getItem("lastDrawDate");
    let drawCount = parseInt(localStorage.getItem("drawCount") || "0");

    if (lastDrawDate !== today) {
      drawCount = 0;
      localStorage.setItem("drawCount", "0");
      localStorage.setItem("lastDrawDate", today);
    }

    function updateCountText() {
      countText.textContent = `ä»Šå¤©å·²æŠ½å¡ ${drawCount} / 2 æ¬¡`;
    }

    function playMusicOnce() {
      if (bgm.paused) {
        bgm.play().catch(() => {});
      }
    }

    function drawCard() {
      playMusicOnce();
      if (drawCount >= 2) {
        alert("ä»Šå¤©å·²ç¶“æŠ½éå…©æ¬¡å›‰ï¼æ˜å¤©å†ä¾†æ‰¾å–µå–µå§ ğŸ±");
        return;
      }

      const imageIndex = Math.floor(Math.random() * images.length);
      const sayingIndex = Math.floor(Math.random() * sayings.length);

      cardImage.src = images[imageIndex];
      cardImage.style.display = "block";
      sayingText.textContent = sayings[sayingIndex];

      drawCount++;
      localStorage.setItem("drawCount", drawCount);
      localStorage.setItem("lastDrawDate", today);
      updateCountText();
    }

    function resetCount() {
      playMusicOnce();
      drawCount = 0;
      localStorage.setItem("drawCount", "0");
      updateCountText();
      alert("å·²é‡ç½®ä»Šæ—¥æŠ½å¡æ¬¡æ•¸ï¼");
    }

    updateCountText();
  </script>
</body>
</html>
